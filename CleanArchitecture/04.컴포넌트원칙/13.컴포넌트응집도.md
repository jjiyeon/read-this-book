# 13. 컴포넌트 응집도

- REP: Reuse/Release Equivalance Priciple 재사용/릴리스 등가 원칙
- CCP: Common Closure Principle 공통 폐쇄 원칙
- CRP: Common Reuse Principle 공통 재사용 원칙

## REP: 재사용/릴리스 등가 원칙

`재사용 단위는 릴리스 단위와 같다.`

소프트웨어 컴포넌트가 릴리스 절차를 통해 추적 관리되지 않거나 릴리스 번호가 부여되지 않는다면 해당 컴포넌트를 재사용하고 싶어도 할 수도 없고, 하지도 않을것이다.

단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 함을 뜻하다. 단순히 뒤죽박죽 임의로 선택된 클래스와 모듈로 구성되어서는 안 된다. 컴포넌트를 구성하는 모든 모듈은 서로 공유하는 중요한 테마나 목적이 있어야 한다.

색다른 시각으로 본다면, 하나의 컴포넌트로 묶인 클래스와 모듈은 반드시 함께 릴리스할 수 있어야 한다. 하나의 컴포넌트로 묶인 클래스와 모듈은 버전 번호가 같아야 하며, 동일한 릴리스로 추적 관리되고, 동일한 릴리스 문서에 포함되어야 한다는 사실은 컴포넌트 제작자 입장이나 사용자 입장에서도 이치에 맞는 얘기다.

## CCP: 공통 폐쇄 원칙

동일한 이유로 동일한 시점에 변경되는 클래스를 같은 컴포넌트로 묶어라. 서로 다른 시점에 다른 이유로 변경되는 클래스는 다른 컴포넌트로 분리하라. 이 원칙은 단일 책임 원칙을 컴포넌트 관점에서 다시 쓴 것이다. SRP에서 단일 클래스는 변경의 이유가 여러 개 있어서는 안 된다고 말하듯이, 공통 폐쇄 원칙에서도 마찬가지로 단일 컴포넌트는 변경의 이유가 여러 개 있어서는 안 된다고 말한다.

CCP는 같은 이유로 변경될 가능성이 있는 클래스는 모두 한곳으로 묶을 것을 권한다. 동일한 유형의 변경에 대해 닫혀 있는 클래스들을 하나의 컴포넌트로 묶음으로써 OCP에서 얻은 교훈을 확대 적용한다.

`동일한 시점에 동일한 이유로 변경되는 것들을 한데 묶어라. 서로 다른 시점에 다른 이유로 변경되는 것들은 서로 분리하라.`

## CRP: 공통 재사용 원칙

> 컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.

CRP에서는 같이 재사용되는 경향이 있는 클래스와 모듈들은 같은 컴포넌트에 포함해야 한다고 말한다. 개별 클래스가 단독으로 재사용되는 경우는 거의 없다. 대체로 재사용 가능한 클래스는 재사용 모듈의 일부로써 해당 모듈의 다른 클래스와 상호작용 하는 경우가 많다. CRP에서는 이런 클래스들이 동일한 컴포넌트에 포함되어야 한다고 말한다.

어떤 클래스를 한데 묶어도 되는지보다는, 어떤 클래스를 한데 묶어서는 안 되는지에 대해서 훨씬 더 많은 것을 이야기한다. CRP는 강하게 결합되지 않은 클래스들을 동일한 컴포넌트에 위치시켜서는 안 된다고 말한다.

`필요하지 않은 것에 의존하지 말라.`

### 결론

컴포넌트 응집도에 대해 균형을 생각해보면 그리고 지금 업무에서 어떻게 하고 있었는가를 생각해보면, 재사용의 원칙에만 너무 집착을 했던것 같다. 재사용을 위해서 고민을 많이 했는데, 고민을 많이 하게 된 이유가 변경이 필요한 컴포넌트와 그렇지 않은 컴포넌트의 구분이 명확하지 않은 상태였기 때문인것 같다. 책에서는 `프로젝트의 컴포넌트 구조는 시간과 성숙도에 따라 변한다.`는 결론을 맺었는데, 너무 와 닿았던 문장.

시간이 지남에 따라, 나의 설계가 계속해서 바른 방향으로 성숙해지고 싶다.
